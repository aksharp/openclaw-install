OpenClaw (V10) has been installed.

All manual steps (Control UI, Tailscale Serve, Signal, audit, TLS, DNS) are in: docs/POST-INSTALL.md (repo root).

Next steps (summary):

1. Vault: a post-install Job bootstraps Vault (init, unseal, KV, policy, gateway token, K8s secret). If you set vault.appSecretsSecret (e.g. via Terraform), app secrets are populated by another Job. Otherwise put application secrets in Vault manually (see docs/POST-INSTALL.md).
   - Wait for Job:    kubectl wait job -n {{ include "openclaw.namespace" . }} -l app.kubernetes.io/component=vault-bootstrap --for=condition=complete --timeout=300s
   - Port-forward:    kubectl port-forward svc/{{ include "openclaw.vault.fullname" . }} 8200:8200 -n {{ include "openclaw.namespace" . }}
   - Root token:     export VAULT_TOKEN=$(kubectl get secret {{ include "openclaw.vault.fullname" . }}-bootstrap-keys -n {{ include "openclaw.namespace" . }} -o jsonpath='{.data.root_token}' | base64 -d)
   - Put secrets:    vault kv put openclaw/gateway gateway_token=... openai_api_key=... anthropic_api_key=...
   - Put signal:     vault kv put openclaw/signal account=+1...

2. Vault gateway token secret is created by the chart; no manual secret needed.

3. Configure Tailscale Serve (V10):
   - Join this cluster/node to Tailscale; do NOT use Funnel for the gateway.
   - Expose gateway port (e.g. {{ .Values.gateway.port }}) via Tailscale Serve to your tailnet only.

4. Access Control UI:
   - Via Tailscale:  https://{{ .Values.tailscale.hostname }} (after Serve is configured)
   - Or port-forward: kubectl port-forward svc/{{ include "openclaw.gateway.fullname" . }} {{ .Values.gateway.port }}:{{ .Values.gateway.port }} -n {{ include "openclaw.namespace" . }}
   - Paste gateway token in Control UI (Settings â†’ token); use the same token you put in Vault at openclaw/gateway as gateway_token.

5. Link Signal and approve pairings:
   - Run openclaw pairing list signal and openclaw pairing approve signal <CODE> (via CLI pod or Control UI).

6. Run security audit:
   - kubectl exec -it deployment/{{ include "openclaw.gateway.fullname" . }} -n {{ include "openclaw.namespace" . }} -- openclaw security audit --fix
   - Or run from a CLI pod if your image supports it.

{{- if .Values.observability.enabled }}
7. Observability (V10):
   {{- if .Values.observability.grafana.enabled }}
   - Grafana:    kubectl port-forward svc/{{ include "openclaw.grafana.fullname" . }} 3000:3000 -n {{ include "openclaw.namespace" . }}
   {{- end }}
   {{- if .Values.observability.prometheus.enabled }}
   - Prometheus: kubectl port-forward svc/{{ include "openclaw.prometheus.fullname" . }} 9090:9090 -n {{ include "openclaw.namespace" . }}
   {{- end }}
   {{- if .Values.observability.loki.enabled }}
   - Loki:       kubectl port-forward svc/{{ include "openclaw.loki.fullname" . }} 3100:3100 -n {{ include "openclaw.namespace" . }}
   {{- end }}
   - Access dashboards via Tailscale (production) or port-forward (local). Configure Alertmanager (Slack/PagerDuty) in values.
{{- end }}

Access is via Ingress only. Add /etc/hosts or DNS so openclaw.{{ .Values.ingress.domain }}, vault.{{ .Values.ingress.domain }}, grafana.{{ .Values.ingress.domain }}, prometheus.{{ .Values.ingress.domain }} resolve to the HAProxy Ingress controller. Port-forward once to the HAProxy service (e.g. kubectl port-forward svc/{{ .Release.Name }}-kubernetes-ingress 8080:80 -n {{ include "openclaw.namespace" . }}), then open http://openclaw.{{ .Values.ingress.domain }}:8080 etc. Restrict access (Tailscale/private). See top-level README and docs/POST-INSTALL.md.
